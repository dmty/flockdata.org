<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~
  ~  Copyright (c) 2012-2016 "FlockData LLC"
  ~
  ~  This file is part of FlockData.
  ~
  ~  FlockData is free software: you can redistribute it and/or modify
  ~  it under the terms of the GNU General Public License as published by
  ~  the Free Software Foundation, either version 3 of the License, or
  ~  (at your option) any later version.
  ~
  ~  FlockData is distributed in the hope that it will be useful,
  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~  GNU General Public License for more details.
  ~
  ~  You should have received a copy of the GNU General Public License
  ~  along with FlockData.  If not, see <http://www.gnu.org/licenses/>.
  -->

<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:int-http="http://www.springframework.org/schema/integration/http"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
		                   http://www.springframework.org/schema/beans/spring-beans.xsd
		                   http://www.springframework.org/schema/integration/http
		                   http://www.springframework.org/schema/integration/http/spring-integration-http.xsd
		                   http://www.springframework.org/schema/context
		                   http://www.springframework.org/schema/context/spring-context.xsd
		                   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

    <aop:aspectj-autoproxy/>
    <context:component-scan base-package="org.flockdata.spring,org.flockdata.client, org.flockdata.shared"/>
    <bean id="trackAspect" class="org.flockdata.spring.annotations.FlockDataAspect"/>

    <int-http:outbound-gateway reply-timeout="1000"
                               request-channel="pingChannel"
                               reply-channel="nullChannel"
                               http-method="GET"
                               url="http://localhost:8080/api/v1/ping"/>

    <int-http:outbound-gateway reply-timeout="1000"
                               request-channel="healthChannel"
                               reply-channel="nullChannel"
                               http-method="GET"
                               url="http://localhost:8080/api/v1/admin/health"/>


    <int:channel id="inputChannel"/>

    <int:channel id="pingChannel"/>
    <int:channel id="healthChannel"/>

</beans>